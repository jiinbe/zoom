<!doctype html>
<html>
<head>
<title>Example Zoom</title>

<meta charset="utf-8" />
<meta http-equiv="Content-type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<style type="text/css">
body {
background-color: #f0f0f2;
margin: 0;
padding: 0;
font-family: -apple-system, system-ui, BlinkMacSystemFont, "Segoe UI", "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
}
main {
width: 600px;
margin: 5em auto;
padding: 2em;
background-color: #fdfdff;
border-radius: 0.5em;
box-shadow: 2px 3px 7px 2px rgba(0,0,0,0.02);
}
a:link, a:visited {
color: #38488f;
text-decoration: none;
}
canvas {
background: rgba(0, 0, 0, 0.05);
box-shadow: 0 0 0 2px white, 0 0 0 3px currentColor;
width: 100%;
height: auto;
}
#canvasContainer {
width: 100%;
height: auto;
}
#saveImage {
background: #f7f7f7 none repeat scroll 0 0;
border-color: #ccc;
box-shadow: 0 1px 0 #ccc;
color: #555;
vertical-align: top;
border-radius: 3px;
border-style: solid;
border-width: 1px;
box-sizing: border-box;
cursor: pointer;
display: inline-block;
font-size: 13px;
height: 28px;
line-height: 26px;
margin: 0;
padding: 0 10px 1px;
text-decoration: none;
white-space: nowrap;
}
@media (max-width: 700px) {
main {
margin: 0 auto;
width: auto;
}
}
</style>    
</head>

<body>
<main>
<h1>Example Zoom</h1>

<p>
<input type="file" id="imageUpload" accept="image/*">
</p>

<div id="canvasContainer">
<canvas id="canvas"></canvas>
</div>

<p>
<input type="range" id="zoomControl" min="0.1" max="2" value="1" step="0.1">
</p>
<!-- Group for Zoom and Joystick controls -->
<div class="controls-container">
<!-- Slider untuk Zoom -->
<div class="slider-container">
<label for="zoomControl">Zoom:</label>
<input type="range" id="zoomControl" min="0.1" max="2" value="1" step="0.1">
</div>
    
<!-- Joystick controls structured like a PlayStation controller -->
<div class="joystick-container">
<div class="joystick-row">
<div class="joystick-spacer"></div>
<button id="moveUp" class="btn btn-primary">↑</button>
<div class="joystick-spacer"></div>
</div>
<div class="joystick-row">
<button id="moveLeft" class="btn btn-primary">←</button>
<div class="joystick-spacer"></div>
<button id="moveRight" class="btn btn-primary">→</button>
</div>
<div class="joystick-row">
<div class="joystick-spacer"></div>
<button id="moveDown" class="btn btn-primary">↓</button>
<div class="joystick-spacer"></div>
</div>
</div>
</div>
    
<!-- Other content goes here... -->
</div>
  
<p>
<button id="saveImage">Download</button>
</p>
</main>
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="app.js"></script>
<!--
<script>
// JavaScript to handle image processing
var canvas = document.getElementById('canvas');
var ctx = canvas.getContext('2d');
var image = new Image();
var twibbon = new Image();
var scale = 1;
var position = { x: 0, y: 0 };
var dragStart, dragged;
// JavaScript untuk menangani pergerakan gambar
var MOVE_AMOUNT = 10; // Jumlah piksel gambar bergerak per klik

document.getElementById('moveLeft').addEventListener('click', function() {
position.x -= MOVE_AMOUNT; // Minus untuk bergerak ke kiri
draw();
});

document.getElementById('moveRight').addEventListener('click', function() {
position.x += MOVE_AMOUNT; // Plus untuk bergerak ke kanan
draw();
});

document.getElementById('moveUp').addEventListener('click', function() {
position.y -= MOVE_AMOUNT; // Minus untuk bergerak ke atas
draw();
});

document.getElementById('moveDown').addEventListener('click', function() {
position.y += MOVE_AMOUNT; // Plus untuk bergerak ke bawah
draw();
});

twibbon.src = 'twibbon.png'; // Make sure 'twibbon.png' is in the correct directory
twibbon.onload = function() {
draw(); // Draw twibbon once it's loaded
};

$('#imageUpload').change(function (e) {
var file = e.target.files[0];
if (file) {
var reader = new FileReader();
reader.onload = function (event) {
image.src = event.target.result;
image.onload = function() {
reset();
draw();
}
};
reader.readAsDataURL(file);
}
});

function reset() {
scale = 1;
position = { x: 0, y: 0 };
}

function draw() {
var iw = image.width;
var ih = image.height;
var cw = canvas.width;
var ch = canvas.height;

var scaleFactor = Math.min(cw / iw, ch / ih);
var iwScaled = iw * scaleFactor * scale;
var ihScaled = ih * scaleFactor * scale;

ctx.clearRect(0, 0, cw, ch);
ctx.save();
ctx.translate(cw / 2, ch / 2); // Center the image in the canvas
ctx.scale(scaleFactor * scale, scaleFactor * scale); // Scale the image
ctx.translate(-iw / 2 + position.x / (scaleFactor * scale), -ih / 2 + position.y / (scaleFactor * scale));
ctx.drawImage(image, 0, 0); // Draw the uploaded image
ctx.restore();
ctx.drawImage(twibbon, 0, 0, cw, ch); // Draw the twibbon overlay
}

function resizeCanvas() {
canvas.width = $('#canvasContainer').width();
canvas.height = canvas.width; // Maintain aspect ratio
draw();
}

$('#zoomControl').on('input', function() {
scale = parseFloat($(this).val());
draw();
});

canvas.addEventListener('mousedown', function(evt) {
dragStart = { x: evt.offsetX - position.x, y: evt.offsetY - position.y };
dragged = false;
}, false);

canvas.addEventListener('mousemove', function(evt) {
if (dragStart) {
position.x = evt.offsetX - dragStart.x;
position.y = evt.offsetY - dragStart.y;
draw();
dragged = true;
}
}, false);

canvas.addEventListener('mouseup', function(evt) {
dragStart = null;
}, false);

document.getElementById('saveImage').addEventListener('click', function() {
var dataURL = canvas.toDataURL('image/png');
var link = document.createElement('a');
link.download = 'twibbonized.png';
link.href = dataURL;
link.click();
});

$(window).resize(resizeCanvas);
resizeCanvas(); // Resize the canvas to fit the container size initially
</script>
--> 
</body>
</html>
